(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{372:function(t,v,_){"use strict";_.r(v);var e=_(25),s=Object(e.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"防止劫持"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#防止劫持"}},[t._v("#")]),t._v(" 防止劫持")]),t._v(" "),_("p",[t._v("这里说的劫持主要是运营商劫持，出现的情况有这样二种：")]),t._v(" "),_("ol",[_("li",[t._v("请求结果返回后运营商插入恶意代码。")]),t._v(" "),_("li",[t._v("响应头"),_("code",[t._v("status")]),t._v("字段返回"),_("code",[t._v("40* 50*")]),t._v("系列状态时遭运营商重定向。")])]),t._v(" "),_("p",[t._v("这种情况下导致最终的请求结果与我们实际想要的结果有差异，解决办法也有二种：")]),t._v(" "),_("ol",[_("li",[t._v("全站启用 HTTPS 安全协议。")]),t._v(" "),_("li",[t._v("使用 HTTPDNS，例如阿里云的 https://www.aliyun.com/product/httpdns")])]),t._v(" "),_("p",[t._v("框架对运营商劫持也做了初步防范，在"),_("code",[t._v("application\\api\\exception")]),t._v("目录下的"),_("code",[t._v("ApiOutput.php")]),t._v("是请求结果返回出口。\n每次数据出口前会对当前的系统环境进行检测，如果是在 HTTPS 状态下响应头"),_("code",[t._v("status")]),t._v("字段返回真实状态，否则始终返回 200 状态，而请求结果中的"),_("code",[t._v("status")]),t._v("字段始终会是真实状态。")])])}),[],!1,null,null,null);v.default=s.exports}}]);